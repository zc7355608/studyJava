<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>关于vue实例</title>
    <script src="../js/vue.js"></script>
</head>
<body>
    <div id="app">
        <h1>{{msg}}</h1>
    </div>
    <script>
/*
通过Vue实例都可以访问哪些属性？（vm.都可以点哪些东西）
    vue实例中的属性很多，有的以$开头，有的以_开头，所有以$开头的都是公开的，推荐我们程序员去用的；
    所有_开头的都是私有的，这些属性是底层框架使用的，一般我们程序员很少用；
    并且通过vm.可以访问vue实例原型对象(原型链)上的属性，例如：vm.$delete
*/
        let dataObj = {
            msg : 'hello Vue'
        }
        const vm = new Vue({
            el : '#app',
            data : dataObj//相当于给vm对象动态的新增一个msg属性，vm对象代理了data对象中的所有属性
        })
        //按理说msg是dataObj对象上的属性，为什么vm对象可以用.来访问呢？
        //这是因为vue框架底层采用了“数据代理机制”，要想搞明白这个，必须先了解：Object.defineProperty()
        console.log(vm.msg);
/*关于Object.defineProperty()方法（ES5）：该方法的作用是给一个对象设置/新增属性
它有3个参数：1、给哪个对象定义属性；2、属性名叫啥；3、{给新增的属性设置多个配置项}
    关于配置项：
        value配置项是给该属性赋值，writable设置该属性的值是否可以被修改；
        enumerable：true表示该属性是可迭代的，可遍历的；
        configurable：true表示该属性是可以被删掉的，可以配置更改的；
    还有一个get和set配置项，这两个配置项是两个函数，它们不需要我们手动调用，当访问或修改属性值的时候，该方法自动被调用
    （注意：当有get和set配置项时，value和writable配置项都不能存在；并且get应该有返回值，返回值就是属性值，set有参数）
*/
    </script>
    <script>
/*数据代理机制：
    什么是数据代理机制？通过访问代理对象的属性来间接访问目标对象的属性，它的实现需要依靠Object.defineProperty()
ES6新特性：在对象当中，方法/函数的 :function 可以省略
*/
    //目标对象
    let target = {
        name : '张三'
    }
    //代理对象
    let proxy = {}
    //如果要实现数据代理机制，就需要给proxy新增一个name属性（代理对象的属性名要和目标对象的属性名一致）
    Object.defineProperty(proxy, 'name', {
        get : function(){
            //间接访问目标对象的属性
            return target.name
        },
        set : function(value){
            //间接给目标对象的属性赋值
            target.name = value
        }
        // get(){}
        // set(value){}
    })
/*这下我们知道了：vue实例代理了data对象中的msg属性，那么，data对象中的所有属性vue实例都会代理吗？并不是
    1、Vue实例不会给以_和$开头的属性做代理（为了不和vue自己的属性名冲突）
    2、通过查看源代码我们知道：Vue实例在运行时会动态扩展一个_data属性，这个属性就是我们的data对象，
        目的是为了框架底层直接访问原生的data对象，而不是访问data的代理对象
    3、vue也提供给程序员一个直接访问data对象的方式，就是通过$data属性
    （如果以后我们不希望访问data的代理对象中的属性，希望直接来访问原生的data对象，推荐用$data）
    4、我们之前说过，data还可以是一个函数function(){}，那么这个函数有什么要求呢？
        如果是函数的话，这个函数必须返回一个对象return {}
    5、那什么时候使用对象{}，什么时候使用函数呢？
        这个等后面学到组件的时候就知道了
*/
    </script>
</body>
</html>